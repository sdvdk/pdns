# This is a Puppet autogenerated configuration file
#################################
# setgid    If set, change group id to this gid for more security
#
# setgid=

setgid=<%= @setgid %>

#################################
# setuid    If set, change user id to this uid for more security
#
# setuid=

setuid=<%= @setuid %>

#################################
# add-superfluous-nsec3-for-old-bind    Add superfluous NSEC3 record to positive wildcard response
#
# add-superfluous-nsec3-for-old-bind=yes

<% if @add_superfluous_nsec3_for_old_bind -%>
add-superfluous-nsec3-for-old-bind=<%= @add_superfluous_nsec3_for_old_bind %>
<% end -%>

#################################
# allow-axfr-ips    Allow zonetransfers only to these subnets
#
# allow-axfr-ips=0.0.0.0/0,::/0

<% if @allow_axfr_ips -%>
allow-axfr-ips=<%= @allow_axfr_ips %>
<% end -%>

#################################
# allow-recursion   List of subnets that are allowed to recurse
#
# allow-recursion=0.0.0.0/0

<% if @allow_recursion -%>
allow-recursion=<%= @allow_recursion %>
<% end -%>

#################################
# any-to-tcp    Answer ANY queries with tc=1, shunting to TCP
#
# any-to-tcp=no

<% if @any_to_tcp -%>
any-to-tcp=<%= @any_to_tcp %>
<% end -%>

#################################
# cache-ttl Seconds to store packets in the PacketCache
#
# cache-ttl=20

<% if @cache_ttl -%>
cache-ttl=<%= @cache_ttl %>
<% end -%>

#################################
# chroot    If set, chroot to this directory for more security
#
# chroot=

<% if @chroot -%>
chroot=<%= @chroot %>
<% end -%>

#################################
# config-dir    Location of configuration directory (pdns.conf)
#
# config-dir=/usr/local/etc

<% if @config_dir -%>
config-dir=<%= @config_dir %>
<% end -%>

#################################
# config-name   Name of this virtual configuration - will rename the binary image
#
# config-name=

<% if @config_name -%>
config-name=<%= @config_name %>
<% end -%>

#################################
# control-console   Debugging switch - don't use
#
# control-console=no

<% if @control_console -%>
control-console=<%= @control_console %>
<% end -%>

#################################
# daemon    Operate as a daemon
#
# daemon=no

<% if @daemon -%>
daemon=<%= @daemon %>
<% end -%>

#################################
# default-ksk-algorithms    Default KSK algorithms
#
# default-ksk-algorithms=rsasha256

<% if @default_ksk_algorithms -%>
default-ksk-algorithms=<%= @default_ksk_algorithms %>
<% end -%>

#################################
# default-ksk-size  Default KSK size (0 means default)
#
# default-ksk-size=0

<% if @default_ksk_size -%>
default-ksk-size=<%= @default_ksk_size %>
<% end -%>

#################################
# default-soa-mail  mail address to insert in the SOA record if none set in the backend
#
# default-soa-mail=

<% if @default_soa_mail -%>
default-soa-mail=<%= @default_soa_mail %>
<% end -%>

#################################
# default-soa-name  name to insert in the SOA record if none set in the backend
#
# default-soa-name=a.misconfigured.powerdns.server

<% if @default_soa_name -%>
default-soa-name=<%= @default_soa_name %>
<% end -%>

#################################
# default-ttl   Seconds a result is valid if not set otherwise
#
# default-ttl=3600

<% if @default_ttl -%>
default-ttl=<%= @default_ttl %>
<% end -%>

#################################
# default-zsk-algorithms    Default ZSK algorithms
#
# default-zsk-algorithms=rsasha256

<% if @default_zsk_algorithms -%>
default-zsk-algorithms=<%= @default_zsk_algorithms %>
<% end -%>

#################################
# default-zsk-size  Default KSK size (0 means default)
#
# default-zsk-size=0

<% if @default_zsk_size -%>
default-zsk-size=<%= @default_zsk_size %>
<% end -%>

#################################
# direct-dnskey Fetch DNSKEY RRs from backend during DNSKEY synthesis
#
# direct-dnskey=no

<% if @direct_dnskey -%>
direct-dnskey=<%= @direct_dnskey %>
<% end -%>

#################################
# disable-axfr  Disable zonetransfers but do allow TCP queries
#
# disable-axfr=no

<% if @disable_axfr -%>
disable-axfr=<%= @disable_axfr %>
<% end -%>

#################################
# disable-tcp   Do not listen to TCP queries
#
# disable-tcp=no

<% if @disable_tcp -%>
disable-tcp=<%= @disable_tcp %>
<% end -%>

#################################
# distributor-threads   Default number of Distributor (backend) threads to start
#
# distributor-threads=3

<% if @distributor_threads -%>
distributor-threads=<%= @distributor_threads %>
<% end -%>

#################################
# do-ipv6-additional-processing Do AAAA additional processing
#
# do-ipv6-additional-processing=yes

<% if @do_ipv6_additional_processing -%>
do-ipv6-additional-processing=<%= @do_ipv6_additional_processing %>
<% end -%>

#################################
# edns-subnet-option-number EDNS option number to use
#
# edns-subnet-option-number=20730

<% if @edns_subnet_option_number -%>
edns-subnet-option-number=<%= @edns_subnet_option_number %>
<% end -%>

#################################
# edns-subnet-processing    If we should act on EDNS Subnet options
#
# edns-subnet-processing=no

<% if @edns_subnet_processing -%>
edns-subnet-processing=<%= @edns_subnet_processing %>
<% end -%>

#################################
# entropy-source    If set, read entropy from this file
#
# entropy-source=/dev/urandom

<% if @entropy_source -%>
entropy-source=<%= @entropy_source %>
<% end -%>

#################################
# experimental-json-interface   If the webserver should serve JSON data
#
# experimental-json-interface=no

<% if @experimental_json_interface -%>
experimental-json-interface=<%= @experimental_json_interface %>
<% end -%>

#################################
# experimental-logfile  Filename of the log file for JSON parser
#
# experimental-logfile=/var/log/pdns.log

<% if @experimental_logfile -%>
experimental-logfile=<%= @experimental_logfile %>
<% end -%>

#################################
# fancy-records Process URL and MBOXFW records
#
# fancy-records=no

<% if @fancy_records -%>
fancy-records=<%= @fancy_records %>
<% end -%>

#################################
# guardian  Run within a guardian process
#
# guardian=no

<% if @guardian -%>
guardian=<%= @guardian %>
<% end -%>

#################################
# include-dir   Include *.conf files from this directory
#
# include-dir=

<% if @include_dir -%>
include-dir=<%= @include_dir %>
<% end -%>

#################################
# launch    Which backends to launch and order to query them in
#
# launch=

<% if scope.lookupvar('pdns::nameserver::config::backend') == 'mysql' -%>
launch=gmysql
<% if @backend_host -%>
gmysql-host=<%= @backend_host %>
<% end -%>
<% if @backend_user -%>
gmysql-user=<%= @backend_user %>
<% end -%>
<% if @backend_dbname -%>
gmysql-dbname=<%= @backend_dbname %>
<% end -%>
<% if @backend_password -%>
gmysql-password=<%= @backend_password %>
<% end -%>
<% elsif scope.lookupvar('pdns::nameserver::config::backend') == 'postgresql' -%>
launch=gpgsql
<% if @backend_host -%>
gpgsql-host=<%= @backend_host %>
<% end -%>
<% if @backend_user -%>
gpgsql-user=<%= @backend_user %>
<% end -%>
<% if @backend_dbname -%>
gpgsql-dbname=<%= @backend_dbname %>
<% end -%>
<% if @backend_password -%>
gpgsql-password=<%= @backend_password %>
<% end -%>
<% elsif scope.lookupvar('pdns::nameserver::config::backend') == 'sqlite' -%>
launch=gsqlite3
<% if @backend_dbpath -%>
gsqlite3-database=<%= @backend_dbpath %>
<% end -%>
<% else -%>
# Something went wrong. No backend specified!
<% end -%>

#################################
# load-modules  Load this module - supply absolute or relative path
#
# load-modules=

<% if @load_modules -%>
load-modules=<%= @load_modules %>
<% end -%>

#################################
# local-address Local IP addresses to which we bind
#
# local-address=0.0.0.0

<% if @local_address -%>
local-address=<%= @local_address %>
<% end -%>

#################################
# local-ipv6    Local IP address to which we bind
#
# local-ipv6=

<% if @local_ipv6 -%>
local-ipv6=<%= @local_ipv6 %>
<% end -%>

#################################
# local-port    The port on which we listen
#
# local-port=53

<% if @local_port -%>
local-port=<%= @local_port %>
<% end -%>

#################################
# log-dns-details   If PDNS should log DNS non-erroneous details
#
# log-dns-details=

<% if @log_dns_details -%>
log-dns-details=<%= @log_dns_details %>
<% end -%>

#################################
# log-dns-queries   If PDNS should log all incoming DNS queries
#
# log-dns-queries=no

<% if @log_dns_queries -%>
log-dns-queries=<%= @log_dns_queries %>
<% end -%>

#################################
# log-failed-updates    If PDNS should log failed update requests
#
# log-failed-updates=

<% if @log_failed_updates -%>
log-failed-updates=<%= @log_failed_updates %>
<% end -%>

#################################
# logging-facility  Log under a specific facility
#
# logging-facility=

<% if @logging_facility -%>
logging-facility=<%= @logging_facility %>
<% end -%>

#################################
# loglevel  Amount of logging. Higher is more. Do not set below 3
#
# loglevel=4

<% if @log_level -%>
loglevel=<%= @log_level %>
<% end -%>

#################################
# lua-prequery-script   Lua script with prequery handler
#
# lua-prequery-script=

<% if @lua_prequery_script -%>
lua-prequery-script=<%= @lua_prequery_script %>
<% end -%>

#################################
# master    Act as a master
#
# master=no

<% if @master -%>
master=<%= @master %>
<% end -%>

#################################
# max-cache-entries Maximum number of cache entries
#
# max-cache-entries=1000000

<% if @max_cache_entries -%>
max-cache-entries=<%= @max_cache_entries %>
<% end -%>

#################################
# max-ent-entries   Maximum number of empty non-terminals in a zone
#
# max-ent-entries=100000

<% if @max_ent_entries -%>
max-ent-entries=<%= @max_ent_entries %>
<% end -%>

#################################
# max-queue-length  Maximum queuelength before considering situation lost
#
# max-queue-length=5000

<% if @max_queue_length -%>
max-queue-length=<%= @max_queue_length %>
<% end -%>

#################################
# max-tcp-connections   Maximum number of TCP connections
#
# max-tcp-connections=10

<% if @max_tcp_connections -%>
max-tcp-connections=<%= @max_tcp_connections %>
<% end -%>

#################################
# module-dir    Default directory for modules
#
# module-dir=/usr/local/lib

<% if @module_dir -%>
module-dir=<%= @module_dir %>
<% end -%>

#################################
# negquery-cache-ttl    Seconds to store negative query results in the QueryCache
#
# negquery-cache-ttl=60

<% if @negquery_cache_ttl -%>
negquery-cache-ttl=<%= @negquery_cache_ttl %>
<% end -%>

#################################
# no-shuffle    Set this to prevent random shuffling of answers - for regression testing
#
# no-shuffle=off

<% if @no_shuffle -%>
no-shuffle=<%= @no_shuffle %>
<% end -%>

#################################
# out-of-zone-additional-processing Do out of zone additional processing
#
# out-of-zone-additional-processing=yes

<% if @out_of_zone_additional_processing -%>
out-of-zone-additional-processing=<%= @out_of_zone_additional_processing %>
<% end -%>

#################################
# overload-queue-length Maximum queuelength moving to packetcache only
#
# overload-queue-length=0

<% if @overload_queue_length -%>
overload-queue-length=<%= @overload_queue_length %>
<% end -%>

#################################
# pipebackend-abi-version   Version of the pipe backend ABI
#
# pipebackend-abi-version=1

<% if @pipebackend_abi_version -%>
pipebackend-abi-version=<%= @pipebackend_abi_version %>
<% end -%>

#################################
# prevent-self-notification Don't send notifications to what we think is ourself
#
# prevent-self-notification=yes

<% if @prevent_self_notification -%>
prevent-self-notification=<%= @prevent_self_notification %>
<% end -%>

#################################
# query-cache-ttl   Seconds to store query results in the QueryCache
#
# query-cache-ttl=20

<% if @query_cache_ttl -%>
query-cache-ttl=<%= @query_cache_ttl %>
<% end -%>

#################################
# query-local-address   Source IP address for sending queries
#
# query-local-address=0.0.0.0

<% if @query_local_address -%>
query-local-address=<%= @query_local_address %>
<% end -%>

#################################
# query-local-address6  Source IPv6 address for sending queries
#
# query-local-address6=::

<% if @query_local_address6 -%>
query-local-address6=<%= @query_local_address6 %>
<% end -%>

#################################
# query-logging Hint backends that queries should be logged
#
# query-logging=no

<% if @query_logging -%>
query-logging=<%= @query_logging %>
<% end -%>

#################################
# queue-limit   Maximum number of milliseconds to queue a query
#
# queue-limit=1500

<% if @queue_limit -%>
queue-limit=<%= @queue_limit %>
<% end -%>

#################################
# receiver-threads  Default number of receiver threads to start
#
# receiver-threads=1

<% if @receiver_threads -%>
receiver-threads=<%= @receiver_threads %>
<% end -%>

#################################
# recursive-cache-ttl   Seconds to store packets for recursive queries in the PacketCache
#
# recursive-cache-ttl=10

<% if @recursive_cache_ttl -%>
recursive-cache-ttl=<%= @recursive_cache_ttl %>
<% end -%>

#################################
# recursor  If recursion is desired, IP address of a recursing nameserver
#
# recursor=no

<% if @recursor -%>
recursor=<%= @recursor %>
<% end -%>

#################################
# retrieval-threads Number of AXFR-retrieval threads for slave operation
#
# retrieval-threads=2

<% if @retrieval_threads -%>
retrieval-threads=<%= @retrieval_threads %>
<% end -%>

#################################
# send-root-referral    Send out old-fashioned root-referral instead of ServFail in case of no authority
#
# send-root-referral=no

<% if @send_root_referral -%>
send-root-referral=<%= @send_root_referral %>
<% end -%>

#################################
# server-id Returned when queried for 'server.id' TXT or NSID, defaults to hostname
#
# server-id=

<% if @server_id -%>
server-id=<%= @server_id %>
<% end -%>

#################################
# signing-threads   Default number of signer threads to start
#
# signing-threads=3

<% if @signing_threads -%>
signing-threads=<%= @signing_threads %>
<% end -%>

#################################
# slave Act as a slave
#
# slave=no

<% if @slave -%>
slave=<%= @slave %>
<% end -%>

#################################
# slave-cycle-interval  Reschedule failed SOA serial checks once every .. seconds
#
# slave-cycle-interval=60

<% if @slave_cycle_interval -%>
slave-cycle-interval=<%= @slave_cycle_interval %>
<% end -%>

#################################
# slave-renotify    If we should send out notifications for slaved updates
#
# slave-renotify=no

<% if @slave_renotify -%>
slave-renotify=<%= @slave_renotify %>
<% end -%>

#################################
# smtpredirector    Our smtpredir MX host
#
# smtpredirector=a.misconfigured.powerdns.smtp.server

<% if @smtpredirector -%>
smtpredirector=<%= @smtpredirector %>
<% end -%>

#################################
# soa-expire-default    Default SOA expire
#
# soa-expire-default=604800

<% if @soa_expire_default -%>
soa-expire-default=<%= @soa_expire_default %>
<% end -%>

#################################
# soa-minimum-ttl   Default SOA minimum ttl
#
# soa-minimum-ttl=3600

<% if @soa_minimum_ttl -%>
soa-minimum-ttl=<%= @soa_minimum_ttl %>
<% end -%>

#################################
# soa-refresh-default   Default SOA refresh
#
# soa-refresh-default=10800

<% if @soa_refresh_default -%>
soa-refresh-default=<%= @soa_refresh_default %>
<% end -%>

#################################
# soa-retry-default Default SOA retry
#
# soa-retry-default=3600

<% if @soa_retry_default -%>
soa-retry-default=<%= @soa_retry_default %>
<% end -%>

#################################
# soa-serial-offset Make sure that no SOA serial is less than this number
#
# soa-serial-offset=0

<% if @soa_serial_offset -%>
soa-serial-offset=<%= @soa_serial_offset %>
<% end -%>

#################################
# socket-dir    Where the controlsocket will live
#
# socket-dir=/var/run

<% if @socket_dir -%>
socket-dir=<%= @socket_dir %>
<% end -%>

#################################
# tcp-control-address   If set, PowerDNS can be controlled over TCP on this address
#
# tcp-control-address=

<% if @tcp_control_address -%>
tcp-control-address=<%= @tcp_control_address %>
<% end -%>

#################################
# tcp-control-port  If set, PowerDNS can be controlled over TCP on this address
#
# tcp-control-port=53000

<% if @tcp_control_port -%>
tcp-control-port=<%= @tcp_control_port %>
<% end -%>

#################################
# tcp-control-range If set, remote control of PowerDNS is possible over these networks only
#
# tcp-control-range=127.0.0.0/8, 10.0.0.0/8, 192.168.0.0/16, 172.16.0.0/12, ::1/128, fe80::/10

<% if @tcp_control_range -%>
tcp-control-range=<%= @tcp_control_range %>
<% end -%>

#################################
# tcp-control-secret    If set, PowerDNS can be controlled over TCP after passing this secret
#
# tcp-control-secret=

<% if @tcp_control_secret -%>
tcp-control-secret=<%= @tcp_control_secret %>
<% end -%>

#################################
# traceback-handler Enable the traceback handler (Linux only)
#
# traceback-handler=yes

<% if @traceback_handler -%>
traceback-handler=<%= @traceback_handler %>
<% end -%>

#################################
# trusted-notification-proxy    IP address of incoming notification proxy
#
# trusted-notification-proxy=

<% if @trusted_notification_proxy -%>
trusted-notification-proxy=<%= @trusted_notification_proxy %>
<% end -%>

#################################
# urlredirector Where we send hosts to that need to be url redirected
#
# urlredirector=127.0.0.1

<% if @urlredirector -%>
urlredirector=<%= @urlredirector %>
<% end -%>

#################################
# version-string    PowerDNS version in packets - full, anonymous, powerdns or custom
#
# version-string=full

<% if @version_string -%>
version-string=<%= @version_string %>
<% end -%>

#################################
# webserver Start a webserver for monitoring
#
# webserver=no

<% if @webserver -%>
webserver=<%= @webserver %>
<% end -%>

#################################
# webserver-address IP Address of webserver to listen on
#
# webserver-address=127.0.0.1

<% if @webserver_address -%>
webserver-address=<%= @webserver_address %>
<% end -%>

#################################
# webserver-password    Password required for accessing the webserver
#
# webserver-password=

<% if @webserver_password -%>
webserver-password=<%= @webserver_password %>
<% end -%>

#################################
# webserver-port    Port of webserver to listen on
#
# webserver-port=8081

<% if @webserver_port -%>
webserver-port=<%= @webserver_port %>
<% end -%>

#################################
# webserver-print-arguments If the webserver should print arguments
#
# webserver-print-arguments=no

<% if @webserver_print_arguments -%>
webserver-print-arguments=<%= @webserver_print_arguments %>
<% end -%>

#################################
# wildcard-url  Process URL and MBOXFW records
#
# wildcard-url=no

<% if @wildcard_url -%>
wildcard-url=<%= @wildcard_url %>
<% end -%>